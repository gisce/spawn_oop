{"name":"Spawn oop","body":"# Spawn Open Object Processes\r\n\r\nSpawns OpenERP instances for functions that consumes a lot of cpu.\r\n\r\n\r\n## Requirements\r\n\r\nTested on OpenERP 5.0.X\r\n\r\n * psutil\r\n * OOOP\r\n\r\nYou need to patch OpenERP server to let bind set a random port\r\npatch -p1 < patches/random_port_on_startup.patch\r\n\r\n\r\n## Example\r\n\r\n```python\r\nfrom spawn_oop import spawn\r\n\r\nfrom tools import config\r\n\r\n\r\nclass ResPartner(osv.osv):\r\n    \"\"\"Inherit class from res.partner.\r\n    \"\"\"\r\n    _inherit = 'res.partner'\r\n\r\n\r\n    @spawn(config['port'])\r\n    def consumes_lot_of_cpu(self, cursor, uid, ids, context=None):\r\n        \"\"\"Some hard function.\r\n        \"\"\"\r\n        y = 0\r\n        for x in range(0, 10000000000):\r\n            y += x\r\n        return y\r\n\r\nResPartner()\r\n```\r\n\r\nWhen `ResPartner.consumes_lot_of_cpu()` is called, another OpenERP instance is \r\nstarted, then via xmlrpc we call `consumes_lot_of_cpu()` in that new instance,\r\nso the main openerp process doesn't get overloaded.\r\n","tagline":"Spawn OpenObject Processes","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}